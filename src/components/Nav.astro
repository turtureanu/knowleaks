---
import "../styles/components/button.scss";
import ThemeButton from "./src/ThemeButton.astro";
---

<nav class="site-nav">
	<input type="checkbox" id="hamburger-input" />
	<label for="hamburger-input" class="hamburger-button"
		><span class="hamburger-lines"></span>
	</label>
	<div class="mobile-background"></div>
	<div class="desktop-container">
		<a href="/index.html" class="logo">
			<div class="logo-container">
				<svg
					class="logo"
					width="391.543"
					height="250.639"
					viewBox="0 0 391.543 250.639"
					xmlns:xlink="http://www.w3.org/1999/xlink"
					xmlns="http://www.w3.org/2000/svg"
					><defs
						><linearGradient id="prefix__a"
							><stop offset="0" stop-color="#0073e5"></stop><stop offset="1" stop-color="#00ace5"
							></stop></linearGradient
						><linearGradient
							xlink:href="#prefix__a"
							id="prefix__b"
							gradientUnits="userSpaceOnUse"
							gradientTransform="matrix(1.0175 0 0 -1.0175 -1143.812 493.151)"
							x1="1124.14"
							y1="374.336"
							x2="1409.853"
							y2="374.336"></linearGradient></defs
					><path
						d="M17.45 4.95h296.123c6.925 0 12.5 5.575 12.5 12.5v215.695c0 6.925-5.575 12.5-12.5 12.5H17.45c-6.925 0-12.5-5.575-12.5-12.5V17.45c0-6.925 5.575-12.5 12.5-12.5z"
						fill="none"
						stroke="url(#prefix__b)"
						stroke-width="9.9"
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-dasharray="39.6 19.8"
						paint-order="stroke fill markers"></path><g
						font-weight="700"
						font-size="97.342"
						font-family="Roboto Mono"
						letter-spacing="15"
						word-spacing="0"
						fill="#fff"
						fill-opacity=".998"
						fill-rule="evenodd"
						paint-order="stroke fill markers"
						><path
							class="logo-font"
							style="line-height:116%;"
							d="M43.398 70.56l18.492 31.706h17.158L52.952 59.213l25.171-34.146h-17.67L42.267 50.994l-6.781 9.438V25.067H21v77.2h14.486V79.52zm106.364 31.706v-77.2h-14.486l-.052 49.576-20.65-49.575h-14.538v77.2h14.538V52.478l20.804 49.787zm82.22-32.926V58.1q0-5.25-.976-9.916-.924-4.666-2.722-8.59-1.644-3.446-3.956-6.309-2.26-2.863-5.29-4.878-3.032-2.12-6.833-3.234-3.75-1.167-8.065-1.167-4.263 0-7.91 1.114-3.648 1.113-6.576 3.181-2.98 2.121-5.29 5.09-2.261 2.97-3.853 6.628-1.644 3.87-2.518 8.43-.821 4.56-.821 9.65v11.24q0 4.773.719 9.068.77 4.294 2.209 7.953 1.592 3.976 3.955 7.158 2.363 3.128 5.342 5.355 3.031 2.12 6.73 3.287 3.698 1.167 8.065 1.167 4.11 0 7.654-1.06 3.595-1.008 6.575-2.864 3.287-2.12 5.856-5.302 2.568-3.181 4.315-6.999 1.644-3.817 2.517-8.271.873-4.507.873-9.491zm-14.64-11.347V69.34q0 2.863-.308 5.514-.257 2.651-.822 4.878-.72 2.863-1.952 5.143-1.182 2.227-2.928 3.712-1.387 1.22-3.185 1.856-1.798.636-3.955.636-2.26 0-4.059-.69-1.746-.689-3.133-1.961-1.49-1.432-2.62-3.712-1.079-2.333-1.644-5.143-.513-2.227-.719-4.825-.205-2.598-.205-5.408V57.993q0-2.969.205-5.673.257-2.704.77-4.984.668-2.97 1.85-5.196 1.233-2.227 2.98-3.712 1.284-1.007 2.876-1.537 1.644-.53 3.647-.53 2.106 0 3.802.583 1.746.583 3.133 1.643 1.747 1.432 3.03 3.712 1.285 2.227 2.056 5.09.616 2.28.873 4.984.308 2.651.308 5.62zm46.673 44.273h13.048l6.267-41.675.565-3.923.565 3.923 6.524 41.675h13.048l10.376-77.2h-13.253l-5.085 43.267-.36 3.234-.462-3.181-6.267-43.32h-10.326l-5.907 43.001-.462 3.182-.36-3.023-4.983-43.16h-13.201zM36.566 216.193v-65.164H22.08v77.2H71.6v-12.036zM146.474 194.4v-11.77h-30.719v-19.46h35.753V151.03H101.27v77.2h50.393v-12.036h-35.907V194.4zm70.097 17.71l4.367 16.118h15.205l-24.04-77.2h-13.1l-24.503 77.2h15.206l4.417-16.119zm-18.903-12.673l7.86-28.42 7.653 28.42zm83.761-2.916l18.493 31.707h17.157l-26.095-43.054 25.17-34.146h-17.67l-18.185 25.928-6.78 9.438v-35.366h-14.486v77.2h14.486v-22.746zm95.885 11.559q0 2.067-.822 3.817-.822 1.697-2.363 2.916-1.54 1.22-3.801 1.91-2.209.688-5.086.688-3.236 0-5.958-.742-2.672-.742-4.572-2.333-1.952-1.59-3.031-4.082-1.079-2.493-1.182-5.992h-14.177q0 5.992 2.209 10.445 2.26 4.454 6.112 7.742 4.059 3.34 9.504 5.09 5.496 1.696 11.095 1.696 5.702 0 10.531-1.378 4.829-1.432 8.322-4.189 3.493-2.704 5.445-6.628 2.003-3.976 2.003-9.066 0-5.886-2.62-10.393-2.62-4.506-7.037-7.9-2.928-2.068-6.421-3.658-3.493-1.591-7.346-2.704-3.596-1.008-6.472-2.174-2.826-1.167-4.83-2.598-2.003-1.379-3.081-3.129-1.028-1.75-1.028-3.923 0-2.068.77-3.818.823-1.803 2.364-3.128 1.54-1.273 3.75-1.962 2.26-.742 5.137-.742 3.133 0 5.445.901 2.363.848 3.955 2.386 1.541 1.59 2.312 3.765.822 2.174.924 4.772h14.076q0-5.197-1.952-9.544-1.953-4.348-5.446-7.53-3.493-3.128-8.373-4.877-4.828-1.75-10.684-1.75-5.651 0-10.48 1.538-4.828 1.484-8.373 4.294-3.544 2.81-5.548 6.787-2.003 3.977-2.003 8.855 0 4.241 1.49 7.847 1.54 3.605 4.52 6.575 2.98 2.969 7.654 5.46 4.726 2.493 10.942 4.243 4.006 1.113 6.678 2.439 2.722 1.272 4.417 2.81 1.644 1.59 2.312 3.393.72 1.803.72 3.87z"
						></path></g
					></svg
				>
			</div>
		</a>

		<ul class="nav-items">
			<li><a class="button" href="/">Blog posts</a></li>
			<li><a class="button" href="/about-me">About me</a></li>
			<li class="theme-button">
				<ThemeButton />
			</li>
			<li>
				<a
					class="button"
					href="https://github.com/turtureanu/knowleaks"
					target="_blank"
					rel="noopener noreferrer">Source code</a
				>
			</li>
		</ul>
	</div>
</nav>

<style lang="scss">
	@use '../styles/variables' as *;
	@use 'sass:math';

	$top-padding: 2.5rem;
	$mobile-nav-width: 60vw;

	.site-nav {
		display: flex;
		flex-direction: column;
		align-items: flex-end;

		.logo-container {
			width: 85px;

			.logo {
				display: block;
				position: absolute;
				top: 0;
				left: 0;
				padding: 0 1em;
				padding-top: $top-padding;
				width: unset;
				height: 5rem;
			}
		}

		.mobile-background {
			position: fixed;
			z-index: 10;
			background-color: $dark1;
			width: $mobile-nav-width;
			height: 100vh;
		}

		.desktop-container {
			width: $mobile-nav-width;
		}

		.nav-items {
			position: absolute;
			z-index: 20;
			margin-top: calc(6.375rem + $top-padding);
			padding: 0;
			width: $mobile-nav-width;
			list-style-type: none;

			li {
				display: grid;
				opacity: 0;

				a {
					margin: 1rem 2rem;
				}

				&.theme-button {
					margin: 0 1.25rem;
				}
			}
		}

		.mobile-background,
		.nav-items {
			transform: scale(0, 1);
			transform-origin: top right;
			transition: transform 150ms ease-out;
			max-width: $small;
		}

		#hamburger-input {
			display: none;
		}

		.hamburger-button {
			display: block;
			z-index: 20;
			cursor: pointer;
			padding: 0 1em;

			// top-padding + hamburger-lines height + margin between hamburger lines + height of hamburger button (from top to bottom line)
			padding-top: $top-padding + 0.5rem + 0.5rem + math.div(5rem - 0.5rem * 5, 2);
			padding-bottom: 2rem;
		}

		.hamburger-lines,
		.hamburger-lines::before,
		.hamburger-lines::after {
			display: block;
			transition: background-color 150ms ease-in-out;
			background-color: $light;
			width: 4rem;
			height: 0.375rem;
		}

		.hamburger-lines::before,
		.hamburger-lines::after {
			box-sizing: border-box;
			position: absolute;
			transform-origin: center center;
			transition: transform 150ms ease-out;
			transition: margin 150ms ease-in;
			content: '';
		}

		.hamburger-lines::before {
			margin-top: -1rem;
		}

		.hamburger-lines::after {
			margin-top: 1rem;
		}

		#hamburger-input:checked ~ label {
			.hamburger-lines {
				transition: background-color 150ms ease-out;
				transition: transform 150ms;
				background-color: $dark1;

				&::before,
				&::after {
					background-color: $light;
				}

				&::before {
					transform: rotate(135deg);
					transition: transform 150ms ease-in;
					transition: margin 150ms ease-in;
					margin-top: 0;
				}

				&::after {
					transform: rotate(-135deg);
					transition: transform 150ms ease-in;
					transition: margin 150ms ease-in;
					margin-top: 0;
				}
			}

			~ .mobile-background,
			~ .desktop-container .nav-items {
				transform: scale(1, 1);
				transition: transform 150ms ease;
			}

			~ .desktop-container .nav-items li {
				transition: 225ms opacity ease-in;
				opacity: 1;
			}
		}

		@media screen and (min-width: $medium) {
			flex-direction: row;
			align-items: center;
			justify-content: center;
			border-bottom: dashed $dark2 0.25rem;
			background-color: $dark1;
			height: 6.25rem;

			.desktop-container {
				display: flex;
				width: $article-width;
				justify-content: space-between;
				align-items: center;
			}

			.logo-container {
				margin-right: 0.5em;
				.logo {
					position: relative;
					padding: 0;
				}
			}

			.hamburger-button,
			.mobile-background {
				display: none;
			}

			.nav-items {
				display: flex;
				position: relative;
				justify-content: space-between;
				transform: none;
				margin: 0;
				padding: 0 2rem;
				width: min-content;
				height: min-content;
				max-width: unset;

				* {
					width: max-content;
				}

				a {
					color: $light;
				}

				li {
					display: flex;
					opacity: 1;

					&:first-of-type a {
						margin-left: 0;
					}

					&:last-of-type a {
						margin-right: 0;
					}

					a {
						align-self: center;
						margin: 0 0.5em;
						padding: 0.25em 0.75em;
					}
				}
			}
		}
	}

	html.light {
		.site-nav {
			border-color: $light2;
			background-color: $light;

			/* stylelint-disable no-descending-specificity */
			.mobile-background {
				background-color: $light1;
			}

			.hamburger-lines,
			.hamburger-lines::before,
			.hamburger-lines::after {
				background-color: $dark;
			}

			#hamburger-input:checked ~ label {
				.hamburger-lines {
					background-color: $light1;

					&::before,
					&::after {
						background-color: $dark;
					}
				}
			}
		}

		.logo-font {
			fill: $dark;
		}
	}
</style>

<style lang="scss" is:global>
	@use '../styles/variables.scss' as *;

	@media screen and (min-width: $medium) {
		.light nav {
			box-shadow: 0 0.5px 10px #e0e0e0;
		}
		nav {
			position: sticky;
			top: 0;
			overflow: hidden;
			z-index: 999999;
			box-shadow: 0 1px 10px $dark;
		}
		li.theme-button {
			margin: 0 0.75rem !important;

			button.button {
				margin: 0 !important;
				padding-top: 0 !important;
				padding-bottom: 0 !important;
			}
		}
	}
</style>
